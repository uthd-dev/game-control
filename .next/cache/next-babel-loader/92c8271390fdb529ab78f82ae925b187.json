{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../../../middleware/index';\nimport passport from '../../../../lib/auth/passport';\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get((req, res) => {\n  if (req.query.returnTo) req.session.returnTo = `${req.query.returnTo}`;\n\n  function doVerify() {\n    if (req.query.verify) return req.query.verify == \"true\" ? true : false;\n  }\n\n  passport.authenticate(\"twitch\", {\n    forceVerify: doVerify()\n  })(req, res);\n});","map":{"version":3,"sources":["D:/Dev/GitHub/game-control/pages/api/auth/twitch/index.js"],"names":["nextConnect","middleware","passport","handler","use","get","req","res","query","returnTo","session","doVerify","verify","authenticate","forceVerify"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,+BAArB;AAEA,MAAMC,OAAO,GAAGH,WAAW,EAA3B;AAEAG,OAAO,CAACC,GAAR,CAAYH,UAAZ;AAEAE,OAAO,CAACE,GAAR,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAc;AACtB,MAAGD,GAAG,CAACE,KAAJ,CAAUC,QAAb,EAAuBH,GAAG,CAACI,OAAJ,CAAYD,QAAZ,GAAwB,GAAEH,GAAG,CAACE,KAAJ,CAAUC,QAAS,EAA7C;;AAEvB,WAASE,QAAT,GAAoB;AAChB,QAAIL,GAAG,CAACE,KAAJ,CAAUI,MAAd,EAAsB,OAAON,GAAG,CAACE,KAAJ,CAAUI,MAAV,IAAoB,MAApB,GAA6B,IAA7B,GAAoC,KAA3C;AACzB;;AAEDV,EAAAA,QAAQ,CAACW,YAAT,CAAsB,QAAtB,EAAgC;AAAEC,IAAAA,WAAW,EAAEH,QAAQ;AAAvB,GAAhC,EAA6DL,GAA7D,EAAkEC,GAAlE;AACH,CARD","sourcesContent":["import nextConnect from 'next-connect';\r\nimport middleware from '../../../../middleware/index';\r\nimport passport from '../../../../lib/auth/passport';\r\n\r\nconst handler = nextConnect();\r\n\r\nhandler.use(middleware);\r\n\r\nhandler.get((req, res) => {\r\n    if(req.query.returnTo) req.session.returnTo = `${req.query.returnTo}`;\r\n\r\n    function doVerify() {\r\n        if (req.query.verify) return req.query.verify == \"true\" ? true : false;\r\n    }\r\n\r\n    passport.authenticate(\"twitch\", { forceVerify: doVerify() })(req, res);\r\n});"]},"metadata":{},"sourceType":"module"}