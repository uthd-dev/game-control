{"ast":null,"code":"import mongoose from \"mongoose\";\nexport default async function database(req, res, next) {\n  try {\n    if (!global.mongoose) {\n      global.mongoose = await mongoose.connect(process.env.MONGODB_URI, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n        useFindAndModify: false\n      });\n      if (!req.mongoose) req.mongoose = globa;\n    }\n  } catch (err) {\n    console.error(err);\n  }\n\n  return next();\n}","map":{"version":3,"sources":["D:/Dev/GitHub/game-control/middleware/database.js"],"names":["mongoose","database","req","res","next","global","connect","process","env","MONGODB_URI","useNewUrlParser","useUnifiedTopology","useFindAndModify","globa","err","console","error"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AAEA,eAAe,eAAeC,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;AACrD,MAAI;AACF,QAAI,CAACC,MAAM,CAACL,QAAZ,EAAsB;AACpBK,MAAAA,MAAM,CAACL,QAAP,GAAkB,MAAMA,QAAQ,CAACM,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,WAA7B,EAA0C;AAChEC,QAAAA,eAAe,EAAE,IAD+C;AAEhEC,QAAAA,kBAAkB,EAAE,IAF4C;AAGhEC,QAAAA,gBAAgB,EAAE;AAH8C,OAA1C,CAAxB;AAKA,UAAG,CAACV,GAAG,CAACF,QAAR,EAAkBE,GAAG,CAACF,QAAJ,GAAea,KAAf;AACnB;AACF,GATD,CASE,OAAOC,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD;;AAED,SAAOV,IAAI,EAAX;AACD","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nexport default async function database(req, res, next) {\r\n  try {\r\n    if (!global.mongoose) {\r\n      global.mongoose = await mongoose.connect(process.env.MONGODB_URI, {\r\n        useNewUrlParser: true,\r\n        useUnifiedTopology: true,\r\n        useFindAndModify: false,\r\n      });\r\n      if(!req.mongoose) req.mongoose = globa\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n\r\n  return next();\r\n}\r\n"]},"metadata":{},"sourceType":"module"}