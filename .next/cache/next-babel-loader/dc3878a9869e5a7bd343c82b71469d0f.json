{"ast":null,"code":"import nextConnect from \"next-connect\";\nimport middleware from \"../../../../middleware/index\";\nimport passport from \"../../../../lib/auth/passport\";\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get(passport.authenticate(\"twitch\", {\n  failureRedirect: \"/\"\n}), function (req, res) {\n  // Successful authentication, redirect home (default) or returnTo (from session), and reset returnTo.\n  if (req.session.returnTo) {\n    let returnTo = req.session.returnTo;\n    req.session.returnTo = \"/\";\n    res.redirect(`${process.env.hostUrl}${returnTo}`);\n  } else res.redirect(\"/\");\n});","map":null,"metadata":{},"sourceType":"module"}